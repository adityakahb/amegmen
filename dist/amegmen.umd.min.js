!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AMegMen=t()}(this,function(){"use strict";var e;return function(e){const t=(e,t,o)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=`${t}ms`,e.style.height=`${e.offsetHeight}px`,e&&e.offsetHeight,e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),o&&o()},t)},o=[],r={},n=(e,t)=>Array.from(e.querySelectorAll(t)),i=(e,t)=>n(e,t)[0],a={idPrefix:"amegmen_id_",duration:250},s=(e,t)=>{return(o=t,o.replace(/^\s+|\s+$|\s+(?=\s)/g,"")).split(" ").some(t=>e.classList.contains(t));var o},c=(e,t)=>{t.split(" ").forEach(t=>{e.classList.add(t)})},m=(e,t)=>{t.split(" ").forEach(t=>{e.classList.remove(t)})},l=(e,t,o)=>{const r={el:e,remove:()=>{e.removeEventListener(t,o,!1)}};return e.addEventListener(t,o,!1),r},p=(e,o)=>{e.l0.l0li.forEach(r=>{const n=r.subnav?.container;!n||o&&r.anchor===o||(m(n,"amegmen-subnav-active"),t(n,e.opts.duration,()=>{m(r.anchor,"amegmen-nav-item-active")}))})},v={ArrowLeft:(e,t,o)=>{o.prev&&(o.prev.anchor.focus(),o.prev.subnav?.container||p(t),s(t.root,"amegmen-root-active")&&v.ArrowDown(e,t,o.prev))},ArrowRight:(e,t,o)=>{o.next&&(o.next.anchor.focus(),o.next.subnav?.container||p(t),s(t.root,"amegmen-root-active")&&v.ArrowDown(e,t,o.next))},ArrowUp:(e,t,o)=>{const r=o.subnav?.container;r&&s(r,"amegmen-subnav-active")&&o.anchor.click()},ArrowDown:(e,t,o)=>{const r=o.subnav?.container;r&&!s(r,"amegmen-subnav-active")&&o.anchor.click()},Tab:(e,t,o)=>{const r=o.subnav?.container;r||p(t),r&&!s(r,"amegmen-subnav-active")&&s(t.root,"amegmen-root-active")&&o.anchor.click()}},y=e=>{e.events.push(l(e._close,"click",()=>{m(e.root,"amegmen-mobile-active")})),e.events.push(l(e._open,"click",()=>{c(e.root,"amegmen-mobile-active")})),e.l0.l0li.forEach(o=>{if(o.subnav?.container){const r=o.subnav?.container;e.events.push(l(o.anchor,"click",n=>{var i,a;n.preventDefault(),s(i=r,a="amegmen-subnav-active")?m(i,a):c(i,a),p(e,o.anchor),s(r,"amegmen-subnav-active")?(c(o.anchor,"amegmen-nav-item-active"),c(e.root,"amegmen-root-active"),((e,t,o)=>{e.style.removeProperty("display");let r=window.getComputedStyle(e).display;"none"===r&&(r="block"),e.style.display=r;const n=e.offsetHeight;e.style.overflow="hidden",e.style.height="0",e.style.paddingTop="0",e.style.paddingBottom="0",e.style.marginTop="0",e.style.marginBottom="0",e&&e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=`${t}ms`,e.style.height=`${n}px`,e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),o&&o()},t)})(r,e.opts.duration,()=>{})):t(r,e.opts.duration,()=>{m(e.root,"amegmen-root-active"),m(o.anchor,"amegmen-nav-item-active")})}))}e.events.push(l(o.anchor,"keyup",t=>{((e,t,o)=>{const r=e.key;r&&v[r]&&v[r](e,t,o)})(t,e,o)}))}),e.events.push(l(window,"resize",(e=>{let t;return function(o){t&&clearTimeout(t),t=setTimeout(e,100,o)}})(()=>{p(e)}))),e.events.push(l(document,"click",t=>{s(e.root,"amegmen-root-active")&&!e.root.contains(t.target)&&p(e)}))},d=(e,t)=>{const o=((e,t)=>{const o=i(e,".amegmen-nav-cta-open"),r=i(e,".amegmen-nav-cta-close"),a=i(e,".amegmen-ul-0"),s=n(a,":scope > li"),c=[];return s.forEach(e=>{c.push({li:e,anchor:i(e,":scope .amegmen-nav-item"),subnav:{container:i(e,":scope > .amegmen-subnav")}})}),c.forEach((e,t)=>{c[t-1]&&(e.prev=c[t-1]),c[t+1]&&(e.next=c[t+1])}),{_close:r,_open:o,events:[],opts:t,root:e,l0:{l0ul:a,l0li:c}}})(e,t);return y(o),o};class u{constructor(e,t,o){r[e]=d(t,o)}}const g=(e,t)=>{const o=e.getAttribute("id")||((e,t,o,r)=>{let n="";if(r&&!e.getAttribute("id"))n=`${t.idPrefix}_${(new Date).getTime()}_${o}`,e.setAttribute("id",n);else if(!r&&e.getAttribute("id")){const o=e.getAttribute("id")||"";n=o,new RegExp(t.idPrefix,"gi").test(o||"")&&e.removeAttribute("id")}return n})(e,t,0,!0);r[o]||new u(o,e,t)};e.destroy=()=>{},e.create=(e,t)=>{n(document,e).forEach(e=>{try{const o={...a,...t};g(e,o)}catch(e){console.error(e)}})};o.push(l(document,"DOMContentLoaded",()=>{n(document,"[data-amegmen]").forEach(e=>{try{const t=Object.fromEntries(Object.entries({idPrefix:e.dataset.amegmenIdPrefix}).filter(([,e])=>void 0!==e)),o={...a,...t};g(e,o)}catch(e){console.error(e)}})})),o.push(l(document,"keyup",e=>{"Escape"===e.key&&Object.keys(r).forEach(e=>{m(r[e].root,"amegmen-root-active"),p(r[e])})}))}(e||(e={})),e});
